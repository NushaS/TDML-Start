<!DOCTYPE html>
<html>
    <head>
        <title>Map</title>
    </head>
<body>
    <h1>Welcome to your Map</h1==>
    <style>
        title {text-align: center;}
        h1 {text-align: center;}
    </style>

    <style>
        #map {
            height: 100%;
        }
        html, body {
            height: 100%;
            margin: 0;
            padding: 0;
        }
    </style>

    <table style="width: 1270px;">
        <tr>

            <td> <a href ="Home.html">Home</a> </td>
            <td> <a href = "Pictures.html"> Pictures</a></td>
            <td> <a href = "Friends.html">Friends</a> </td>
            <td> <a href = "Map.html"   style="color: rgb(18, 97, 216);">Map</a></td>
            <td> <a href = "index.html">Sign Out</a> </td>


        </tr>
    </table>

    <div class='wrapper'>
    <form id='nameForm'>
    <div class='form-uname'>
        <label id='latLable' for='latField'>Insert Latitude:</label>
        <input id='latField' type='text' maxlength='25'></input>
        <label id='lngLable' for='lngField'>Insert Longitude:</label>
        <input id='lngField' type='text' maxlength='25'></input>
    </div>
    <div class='form-sub'>
        <button id='subButton' type='button'>Add Coordinates to Map</button>
    </div>
    </form>
    
    <div>
        <p id ='result'></p>
    </div>
    </div>

    <script>
        function getLatitude() {
            var latField = document.getElementById('latField').value;
            var result = document.getElementById('result');
        }
        function getLongitude() {
            var lngField = document.getElementById('lngField').value;
            var result = document.getElementById('result');
        }
    </script>

    <script async
        src="https://maps.googleapis.com/maps/api/js?key=YOUR_API_KEY&callback=initMap">
    </script>

    <script>
        let map;
        function initMap() {
            map = new google.maps.Map(document.getElementById("map"), {
                center: { lat: -34.398, lng: 150.644},
                zoom: 8,
            });
        }

        window.initMap = initMap;
    </script>

    <div id="map-canvas"></div>
    <div class="controls">
        <p>Zoom</p>
        <i class="icon-plus-sign"></i> 
        <i class="icon-minus-sign"></i>

        <div class="pinWrapper">
            <p>Drop your pin</p>
            <img src="https://cdn0.iconfinder.com/data/icons/20-flat-icons/128/location-pointer.png">
        </div>
    </div>

    <link rel="stylesheet" href="//ajax.googleapis.com/ajax/libs/jqueryui/1.11.1/themes/smoothness/jquery-ui.css" />
    <script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.11.1/jquery.min.js"></script>
    <script src="//ajax.googleapis.com/ajax/libs/jqueryui/1.11.1/jquery-ui.min.js"></script>
    <script src="http://maps.googleapis.com/maps/api/js?libraries=geometry,visualization,drawing,places&sensor=false"></script>
    <script>
    $(document).ready(function() {
    var mouseStartDrag=[0,0];
    var newMarker;
    var activePointPin = [47,128];  // = bottom center of the pin.  Change this value if the pin is changed

    // jQuery-UI draggable
    $('.pinWrapper img').draggable({
        start: function(event) {
        // this gives you the position of the mouse relative to the image.
        mouseStartDrag = [event.offsetX, event.offsetY];    
        },
        stop: function(event) {
        // we look at the mouse position, subtract it from the position of the map, so we get the mouse position over the map
        var coordinatesOverDiv = [event.clientX - $('#map-canvas').position().left, event.clientY - $('#map-canvas').position().top];
        // we don't want the mouse position, we want the position of the active point on the pin.
        coordinatesOverDiv = [
            coordinatesOverDiv[0] + activePointPin[0] - mouseStartDrag[0], 
            coordinatesOverDiv[1] + activePointPin[1] - mouseStartDrag[1]
        ];
        // ask Google to get the position, corresponding to a pixel on the map
        var pixelLatLng = overlay.getProjection().fromContainerPixelToLatLng( new google.maps.Point(coordinatesOverDiv[0], coordinatesOverDiv[1]) );
        // set a new marker
        newMarker = new google.maps.Marker({
            map: map,
            position: pixelLatLng
        });
        // set the pin back to its original position, @see http://stackoverflow.com/questions/15193640/jquery-ui-draggable-reset-to-original-pos
        $(this).animate({
            top: "0px",
            left: "0px"
        });

        }
    });
    initialize();
    });
    var map;
    var overlay;

    // Google Maps
    function initialize() {
    var mapOptions = {
        zoom: 8,
        center: new google.maps.LatLng(50.5, 4.5),  // Over Belgium
        mapTypeId: google.maps.MapTypeId.TERRAIN
    };
    map = new google.maps.Map(document.getElementById('map-canvas'), mapOptions);
    // this overlay will be used to calculate mouse coordinates to Lat/Lng
    overlay = new google.maps.OverlayView();
    overlay.draw = function() {};
    overlay.setMap(map);
    }
    </script>
    <style>
    #map-canvas {
    height:400px;
    }
    </style>


    <!--
        <iframe src="https://www.google.com/maps/embed?pb=!1m10!1m8!1m3!1d21521.153066216648!2d-122.170504!3d47.60388700000001!3m2!1i1024!2i768!4f13.1!5e0!3m2!1sen!2sus!4v1652369749342!5m2!1sen!2sus" width="600" height="450" style="border:0;" allowfullscreen="" loading="lazy" referrerpolicy="no-referrer-when-downgrade"></iframe>
        <script>
        function initMap() {
            var mapCoordinates = { lat: 'latField', lng: 'lonField'};
            const map = new google.maps.Map(document.getElementById("map"), {
                    zoom: 4,
                    center: mapCoordinates,
                }
            );

            var marker = new google.maps.Marker({
                position: mapCoordinates,
                map: map,
            });
        }

        window.initMap = initMap;
    </script> -->
    
    <style>
        body {
            background-color: rgb(231, 138, 192);}
    </style>
    
</html>
